<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Projetos | MBBIM Consultoria & Inovação</title>
  <meta name="description"
        content="Projetos selecionados em BIM, planejamento 4D, quantificação, automações e implantação de processos digitais.">
  <link rel="stylesheet" href="css/styles.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Sora:wght@400;500;600;700&display=swap"
        rel="stylesheet">

  <style>
    /* Imagem destacada do projeto */
    .project-detail-image img {
      width: 100%;
      max-height: 420px;
      object-fit: contain;
      border-radius: 12px;
      background: #0f1a20;
      cursor: zoom-in;
    }

    /* Modal / popup da imagem */
    #image-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.85);
      z-index: 9999;
      padding: 40px;
    }
    #image-modal img {
      max-width: 90vw;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0,0,0,0.6);
    }
    #image-modal .modal-close {
      position: absolute;
      top: 30px;
      right: 40px;
      font-size: 32px;
      background: rgba(0,0,0,0.6);
      border-radius: 50%;
      color: white;
      width: 46px;
      height: 46px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    /* Bullets do detalhe do projeto */
    .project-detail-bullets {
      list-style: none;
      margin-top: 1.2rem;
      padding-left: 0;
    }

    .project-detail-bullets li {
      position: relative;
      padding-left: 1.2rem;
      margin-bottom: 0.35rem;
      font-size: 0.9rem;
      color: #d0d0d0;
      line-height: 1.6;
    }

    .project-detail-bullets li::before {
      content: "•";
      position: absolute;
      left: 0;
      top: 0;
      color: #2c8688;
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="container nav-content">
      <div class="logo-area">
        <img src="img/logo-mbbim-branco.png" alt="MBBIM Consultoria &amp; Inovação" class="logo-img">
      </div>

      <button class="nav-toggle" aria-label="Abrir menu">☰</button>

      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="sobre.html">Sobre</a>
        <a href="servicos.html">Serviços</a>
        <a href="projetos.html">Projetos</a>
        <a href="contato.html">Contato</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Lista de projetos (carrossel, sem imagem) -->
    <section class="section" id="projetos-lista">
      <div class="container">
        <span class="section-eyebrow">Portfólio</span>
        <h1>Projetos selecionados</h1>
        <p class="section-subtitle">
          Uma amostra dos trabalhos realizados com BIM, planejamento 4D, automações e implantação de processos
          digitais em ambientes de projeto e obra.
        </p>

        <div class="portfolio-nav-wrapper">
          <button class="portfolio-arrow" id="projects-prev" aria-label="Projetos anteriores">
            ‹
          </button>

          <div class="portfolio-grid" id="portfolio-grid-projetos">
            <!-- cards via JS -->
          </div>

          <button class="portfolio-arrow" id="projects-next" aria-label="Próximos projetos">
            ›
          </button>
        </div>
      </div>
    </section>

    <!-- Detalhe do projeto selecionado -->
    <section class="section section-alt" id="projeto-detalhe">
      <div class="container project-detail-grid">
        <div class="project-detail-image">
          <img src="" alt="" id="project-detail-image">
        </div>
        <div class="project-detail-text">
          <h2 id="project-detail-title"></h2>
          <ul class="portfolio-tags" id="project-detail-tags"></ul>
          <p id="project-detail-body"></p>

          <!-- AQUI entram os bullets -->
          <ul class="project-detail-bullets" id="project-detail-bullets"></ul>
        </div>
      </div>
    </section>
  </main>

  <!-- Popup da imagem -->
  <div id="image-modal">
    <div class="modal-close" id="modal-close">✕</div>
    <img src="" alt="Imagem ampliada" id="modal-img">
  </div>

  <!-- Rodapé -->
  <footer class="footer">
    <div class="container footer-content">
      <p>© <span id="year"></span> MBBIM Consultoria &amp; Inovação. Todos os direitos reservados.</p>
      <p class="footer-secondary">
        Focado em BIM, dados e processos para projetos mais eficientes.
      </p>
    </div>
  </footer>

  <script>
    // ===========================
    // PROJETOS (4 itens)
    // ===========================
    const PROJECTS = [
      {
        id: "implantacao-bim-automacao-quantitativos",
        title: "Implantação BIM com Automação de Verificação e Quantificação",
        shortDescription:
          "Implantação de BIM com padrões, regras automáticas e quantitativos confiáveis diretamente dos modelos.",
        image: "img/projetos/implantacao-bim-regras.png",
        tags: ["Implantação BIM", "Verificação", "Quantitativos"],
        detail:
          "Implantação de BIM em uma construtora, com definição de processos, padronização de parâmetros, criação de regras automáticas de verificação e estruturação de rotinas para extração de quantitativos confiáveis diretamente dos modelos.",
        bullets: [
          "Mapeamento de processos e diagnóstico de maturidade BIM.",
          "Padronização de modelos, parâmetros e classificações.",
          "Criação de regras automatizadas para verificação de qualidade.",
          "Estruturação de modelos para extração de quantitativos consistentes.",
          "Treinamento e acompanhamento da equipe no uso dos novos fluxos."
        ]
      },
      {
        id: "planejamento-4d-logistica-automacao",
        title: "Planejamento 4D Integrado com Logística e Automação da Produção",
        shortDescription:
          "Simulações 4D combinadas com estudos logísticos e automação da sequência de produção de estacas.",
        image: "img/projetos/simulacao-4d-logistica.png",
        tags: ["Planejamento 4D", "Logística de Obra", "Automação"],
        detail:
          "Desenvolvimento de simulações 4D combinadas com estudo logístico e automação da sequência de produção de estacas, permitindo testar cenários, antecipar interferências e melhorar a previsibilidade da obra.",
        bullets: [
          "Integração entre modelo BIM, cronograma e estratégias executivas.",
          "Simulações 4D para validação de sequências construtivas.",
          "Planejamento logístico de início de obra com modelagem de canteiro.",
          "Automação da lógica de produção de estacas com regras configuráveis.",
          "Comunicação visual do plano de ataque para equipes de obra."
        ]
      },
      {
        id: "auditoria-modelos-ifc",
        title: "Auditoria e Gestão da Qualidade de Modelos IFC",
        shortDescription:
          "Auditoria sistemática de modelos IFC para garantir consistência e qualidade de dados.",
        image: "img/projetos/auditoria-ifc.png",
        tags: ["IFC", "Qualidade de Dados", "Model Checking"],
        detail:
          "Auditoria completa de modelos IFC recebidos de múltiplos projetistas, com verificação de estrutura de dados, parâmetros, nomenclatura e consistência geométrica, garantindo modelos confiáveis para uso em coordenação e quantificação.",
        bullets: [
          "Definição de checklists e critérios de qualidade alinhados ao cliente.",
          "Verificação automática de parâmetros, hierarquias e classificações.",
          "Relatórios de inconsistências e priorização de correções.",
          "Padronização da estrutura IFC para uso em análises e dashboards.",
          "Acompanhamento de ajustes de modelagem com projetistas."
        ]
      },
      {
        id: "vdc-montagem-eletromecanica",
        title: "Aplicação de VDC em Montagem Eletromecânica",
        shortDescription:
          "Integração entre modelo, planejamento e logística na montagem eletromecânica de equipamento de grande porte.",
        image: "img/projetos/vdc-montagem-eletromecanica.png",
        tags: ["VDC", "Eletromecânica", "Planejamento 4D"],
        detail:
          "Aplicação de Virtual Design and Construction (VDC) na montagem eletromecânica de equipamento de grande porte, integrando modelo 3D, planejamento, logística e navegação em realidade virtual para comunicação do processo.",
        bullets: [
          "Preparação e organização do modelo 3D com milhares de componentes.",
          "Simulações de montagem e análise de interferências.",
          "Planejamento 4D integrado à estratégia executiva.",
          "Estudos de logística de içamento, montagem e acessos.",
          "Versões navegáveis do modelo para uso em realidade virtual."
        ]
      }
    ];
  
    const gridProjetos = document.getElementById("portfolio-grid-projetos");
    const imgDetail = document.getElementById("project-detail-image");
    const titleDetail = document.getElementById("project-detail-title");
    const tagsDetail = document.getElementById("project-detail-tags");
    const bodyDetail = document.getElementById("project-detail-body");
    const bodyList = document.getElementById("project-detail-bullets");
  
    const prevBtn = document.getElementById("projects-prev");
    const nextBtn = document.getElementById("projects-next");
  
    let VISIBLE_CARDS = getVisibleCards();
    window.addEventListener("resize", () => {
        VISIBLE_CARDS = getVisibleCards();
        renderProjectsCarousel(currentProjectId);
    });
    let projectStartIndex = 0;   // primeiro card visível
    let currentProjectId = null; // projeto selecionado no detalhe

    function getVisibleCards() {
      return window.innerWidth <= 700 ? 2 : 3;
    }
    
    function renderProjectsCarousel(activeId) {
      gridProjetos.innerHTML = "";
  
      for (let i = 0; i < VISIBLE_CARDS; i++) {
        const idx = (projectStartIndex + i) % PROJECTS.length;
        const project = PROJECTS[idx];
  
        const card = document.createElement("article");
        card.className = "portfolio-card" + (project.id === activeId ? " active" : "");
  
        card.innerHTML = `
          <button class="portfolio-card-button" type="button" data-project-id="${project.id}">
            <div class="portfolio-body">
              <h3>${project.title}</h3>
              <p>${project.shortDescription}</p>
              <ul class="portfolio-tags">
                ${project.tags.map(tag => `<li>${tag}</li>`).join("")}
              </ul>
            </div>
          </button>
        `;
  
        gridProjetos.appendChild(card);
      }
  
      gridProjetos.querySelectorAll(".portfolio-card-button").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-project-id");
          setActiveProject(id, true);
        });
      });
    }
  
    function setActiveProject(id, updateUrl) {
      let projectIndex = PROJECTS.findIndex(p => p.id === id);
      if (projectIndex === -1) projectIndex = 0;
  
      const project = PROJECTS[projectIndex];
  
      // Atualiza o detalhe
      imgDetail.src = project.image;
      imgDetail.alt = project.title;
      titleDetail.textContent = project.title;
      tagsDetail.innerHTML = project.tags.map(t => `<li>${t}</li>`).join("");
      bodyDetail.textContent = project.detail;
  
      if (bodyList) {
        bodyList.innerHTML = (project.bullets || [])
          .map(item => `<li>${item}</li>`)
          .join("");
      }
  
      currentProjectId = project.id;
  
      // Ajusta a janela do carrossel para garantir que o ativo apareça
      if (PROJECTS.length <= VISIBLE_CARDS) {
        projectStartIndex = 0;
      } else {
        if (projectIndex <= 1) {
          projectStartIndex = 0;
        } else if (projectIndex >= PROJECTS.length - 1) {
          projectStartIndex = PROJECTS.length - VISIBLE_CARDS;
        } else {
          projectStartIndex = projectIndex - 1;
        }
      }
  
      renderProjectsCarousel(currentProjectId);
  
      // Atualiza a URL (?projeto=...)
      if (updateUrl) {
        const params = new URLSearchParams(window.location.search);
        params.set("projeto", project.id);
        const newUrl = `${window.location.pathname}?${params.toString()}`;
        window.history.replaceState({}, "", newUrl);
      }
    }
  
    // Projeto inicial
    const params = new URLSearchParams(window.location.search);
    const initialId = params.get("projeto") || PROJECTS[0].id;
    setActiveProject(initialId, false);
  
    // Navegação pelas setas – muda o PROJETO ativo (não só a janela)
    if (prevBtn && nextBtn && gridProjetos) {
      prevBtn.addEventListener("click", () => {
        const currentIndex = PROJECTS.findIndex(p => p.id === currentProjectId);
        const newIndex = (currentIndex - 1 + PROJECTS.length) % PROJECTS.length;
        setActiveProject(PROJECTS[newIndex].id, true);
      });
  
      nextBtn.addEventListener("click", () => {
        const currentIndex = PROJECTS.findIndex(p => p.id === currentProjectId);
        const newIndex = (currentIndex + 1) % PROJECTS.length;
        setActiveProject(PROJECTS[newIndex].id, true);
      });
    }
  
    // Ano rodapé
    document.getElementById("year").textContent = new Date().getFullYear();
  
    // Menu mobile
    const navToggle = document.querySelector(".nav-toggle");
    const navLinks = document.querySelector(".nav-links");
    if (navToggle && navLinks) {
      navToggle.addEventListener("click", () => {
        navLinks.classList.toggle("nav-open");
      });
    }
  
    // Popup da imagem
    const modal = document.getElementById("image-modal");
    const modalImg = document.getElementById("modal-img");
    const closeBtn = document.getElementById("modal-close");
  
    imgDetail.addEventListener("click", () => {
      if (!imgDetail.src) return;
      modalImg.src = imgDetail.src;
      modal.style.display = "flex";
    });
  
    closeBtn.addEventListener("click", () => {
      modal.style.display = "none";
    });
  
    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.style.display = "none";
      }
    });
  </script>
</body>
</html>
