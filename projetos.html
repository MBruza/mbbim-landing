<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Projetos | MBBIM Consultoria & Inovação</title>
  <meta name="description"
        content="Projetos selecionados em BIM, planejamento 4D, quantificação, automações e implantação de processos digitais.">
  <link rel="stylesheet" href="css/styles.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Sora:wght@400;500;600;700&display=swap"
        rel="stylesheet">

  <style>
    /* Imagem destacada do projeto */
    .project-detail-image img {
      width: 100%;
      max-height: 420px;
      object-fit: contain;
      border-radius: 12px;
      background: #0f1a20;
      cursor: zoom-in;
    }

    /* Modal / popup da imagem */
    #image-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.85);
      z-index: 9999;
      padding: 40px;
    }
    #image-modal img {
      max-width: 90vw;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0,0,0,0.6);
    }
    #image-modal .modal-close {
      position: absolute;
      top: 30px;
      right: 40px;
      font-size: 32px;
      background: rgba(0,0,0,0.6);
      border-radius: 50%;
      color: white;
      width: 46px;
      height: 46px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="container nav-content">
      <div class="logo-area">
        <img src="img/logo-mbbim-branco.png" alt="MBBIM Consultoria &amp; Inovação" class="logo-img">
      </div>

      <button class="nav-toggle" aria-label="Abrir menu">☰</button>

      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="sobre.html">Sobre</a>
        <a href="servicos.html">Serviços</a>
        <a href="projetos.html">Projetos</a>
        <a href="contato.html">Contato</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Lista de projetos (carrossel, sem imagem) -->
    <section class="section" id="projetos-lista">
      <div class="container">
        <span class="section-eyebrow">Portfólio</span>
        <h1>Projetos selecionados</h1>
        <p class="section-subtitle">
          Uma amostra dos trabalhos realizados com BIM, planejamento 4D, automações e implantação de processos
          digitais em ambientes de projeto e obra.
        </p>

        <div class="portfolio-nav-wrapper">
          <button class="portfolio-arrow" id="projects-prev" aria-label="Projetos anteriores">
            ‹
          </button>

          <div class="portfolio-grid" id="portfolio-grid-projetos">
            <!-- cards via JS -->
          </div>

          <button class="portfolio-arrow" id="projects-next" aria-label="Próximos projetos">
            ›
          </button>
        </div>
      </div>
    </section>

    <!-- Detalhe do projeto selecionado -->
    <section class="section section-alt" id="projeto-detalhe">
      <div class="container project-detail-grid">
        <div class="project-detail-image">
          <img src="" alt="" id="project-detail-image">
        </div>
        <div class="project-detail-text">
          <h2 id="project-detail-title"></h2>
          <ul class="portfolio-tags" id="project-detail-tags"></ul>
          <p id="project-detail-body"></p>
        </div>
      </div>
    </section>
  </main>

  <!-- Popup da imagem -->
  <div id="image-modal">
    <div class="modal-close" id="modal-close">✕</div>
    <img src="" alt="Imagem ampliada" id="modal-img">
  </div>

  <!-- Rodapé -->
  <footer class="footer">
    <div class="container footer-content">
      <p>© <span id="year"></span> MBBIM Consultoria &amp; Inovação. Todos os direitos reservados.</p>
      <p class="footer-secondary">
        Focado em BIM, dados e processos para projetos mais eficientes.
      </p>
    </div>
  </footer>

  <script>
    // ===========================
    // PROJETOS (6 itens)
    // ===========================
    const PROJECTS = [
      {
        id: "implantacao-bim-regras",
        title: "Implantação de BIM com Regras de Verificação Automáticas",
        shortDescription:
          "Implantação de BIM com padrões e regras automáticas para elevar a confiabilidade dos modelos.",
        image: "img/projetos/implantacao-bim-regras.png",
        tags: ["Implantação BIM", "Verificação", "Processos"],
        detail:
          "Projeto focado em estruturar a implantação de BIM conectando padrões de modelagem a regras automáticas de verificação. Foram definidos fluxos, responsabilidades e critérios de qualidade, com checks objetivos aplicados diretamente nos modelos.",
        bullets: [
          "Mapeamento de processos e definição do fluxo BIM alvo.",
          "Criação de padrões de parâmetros, nomenclaturas e estrutura dos modelos.",
          "Implementação de regras automáticas de verificação (model checking).",
          "Relatórios de não conformidades e acompanhamento de revisões.",
          "Redução de retrabalho e maior confiabilidade das entregas."
        ]
      },
      {
        id: "quantitativos-orcamentos",
        title: "Extração de Quantitativos de Modelos para Orçamentos",
        shortDescription:
          "Estruturação de modelos e rotinas para gerar quantitativos confiáveis para orçamentos.",
        image: "img/projetos/quantitativos-orcamentos.png",
        tags: ["Quantitativos", "IFC", "Orçamento"],
        detail:
          "O trabalho consistiu em transformar modelos em bases de quantitativos consistentes para orçamento. A partir da padronização de informações e definição de critérios de medição, foram criadas rotinas que alimentam planilhas e análises de custo.",
        bullets: [
          "Revisão e ajuste dos modelos para quantificação.",
          "Definição de critérios de medição e agrupamento.",
          "Extração de quantitativos diretos de BIM e/ou IFC.",
          "Geração de planilhas vinculadas ao modelo.",
          "Maior transparência e rastreabilidade na origem dos números."
        ]
      },
      {
        id: "simulacao-4d-logistica",
        title: "Simulação 4D e Plano Logístico de Início de Obra",
        shortDescription:
          "Simulações 4D e estudos logísticos para organizar a fase inicial da obra.",
        image: "img/projetos/simulacao-4d-logistica.png",
        tags: ["4D", "Logística", "Planejamento"],
        detail:
          "Integração de modelo 3D, cronograma e logística para organizar a fase inicial da obra. As simulações 4D e estudos de ocupação de áreas permitiram antecipar conflitos e comunicar com clareza o plano de ataque às equipes.",
        bullets: [
          "Modelagem do canteiro e estruturas temporárias.",
          "Simulação 4D da fase inicial da obra.",
          "Estudos de acessos, estoques e circulação.",
          "Avaliação de alternativas de sequência construtiva.",
          "Melhor comunicação do plano de execução."
        ]
      },
      {
        id: "automatizacao-estacas",
        title: "Automatização do Planejamento da Produção de Estacas",
        shortDescription:
          "Automatização da lógica de sequência de produção de estacas para reduzir retrabalho.",
        image: "img/projetos/automatizacao-estacas.png",
        tags: ["Planejamento", "Estacas", "Automação"],
        detail:
          "Automatização do planejamento da produção de estacas, conectando informações de projeto e regras de execução a uma rotina estruturada. A ferramenta reduz o esforço manual e facilita a criação de cenários de execução.",
        bullets: [
          "Modelagem/estruturação dos elementos de fundação.",
          "Regras parametrizadas de sequência de execução.",
          "Rotina automatizada para geração de planos de estacas.",
          "Visualização dos cenários alinhada ao cronograma.",
          "Menos retrabalho e maior previsibilidade."
        ]
      },
      {
        id: "vdc-montagem-eletromecanica",
        title: "Aplicação de VDC em Montagem Eletromecânica",
        shortDescription:
          "Integração entre modelo, planejamento e logística na montagem eletromecânica.",
        image: "img/projetos/vdc-montagem-eletromecanica.png",
        tags: ["VDC", "Eletromecânica", "4D"],
        detail:
          "Aplicação de Virtual Design and Construction na montagem eletromecânica de equipamento de grande porte. O modelo 3D foi integrado ao cronograma e à estratégia de montagem, apoiando análises de sequência e riscos.",
        bullets: [
          "Preparação do modelo para uso em VDC.",
          "Integração entre componentes e etapas do cronograma.",
          "Simulações construtivas e análises de interferência.",
          "Apoio às decisões logísticas de montagem.",
          "Navegação e comunicação facilitada com modelos VR."
        ]
      },
      {
        id: "auditoria-modelos-ifc",
        title: "Auditoria e Gestão da Qualidade de Modelos IFC",
        shortDescription:
          "Auditoria sistemática de modelos IFC para garantir consistência e qualidade de dados.",
        image: "img/projetos/auditoria-ifc.png",
        tags: ["IFC", "Qualidade", "Model Checking"],
        detail:
          "Auditoria recorrente de modelos IFC de diferentes disciplinas, avaliando qualidade de dados e critérios de modelagem. Foram criados checklists objetivos, relatórios e acompanhamento da evolução ao longo do ciclo de projeto.",
        bullets: [
          "Critérios de qualidade para modelos IFC.",
          "Checklist de auditoria técnica e geométrica.",
          "Relatórios de não conformidade.",
          "Acompanhamento de revisões e evolução da qualidade.",
          "Modelos mais confiáveis para uso em análises e planejamento."
        ]
      }
    ];

    const gridProjetos = document.getElementById("portfolio-grid-projetos");
    const imgDetail = document.getElementById("project-detail-image");
    const titleDetail = document.getElementById("project-detail-title");
    const tagsDetail = document.getElementById("project-detail-tags");
    const bodyDetail = document.getElementById("project-detail-body");

    const prevBtn = document.getElementById("projects-prev");
    const nextBtn = document.getElementById("projects-next");

    const VISIBLE_CARDS = 3;
    let projectStartIndex = 0;      // primeiro card visível no carrossel
    let currentProjectId = null;    // projeto atualmente selecionado no detalhe

    function renderProjectsCarousel(activeId) {
      gridProjetos.innerHTML = "";

      for (let i = 0; i < VISIBLE_CARDS; i++) {
        const idx = (projectStartIndex + i) % PROJECTS.length;
        const project = PROJECTS[idx];

        const card = document.createElement("article");
        card.className = "portfolio-card" + (project.id === activeId ? " active" : "");

        card.innerHTML = `
          <button class="portfolio-card-button" type="button" data-project-id="${project.id}">
            <div class="portfolio-body">
              <h3>${project.title}</h3>
              <p>${project.shortDescription}</p>
              <ul class="portfolio-tags">
                ${project.tags.map(tag => `<li>${tag}</li>`).join("")}
              </ul>
            </div>
          </button>
        `;

        gridProjetos.appendChild(card);
      }

      // listeners dos 3 cards visíveis
      gridProjetos.querySelectorAll(".portfolio-card-button").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-project-id");
          setActiveProject(id, true);
        });
      });
    }

    function setActiveProject(id, updateUrl) {
      const project = PROJECTS.find(p => p.id === id) || PROJECTS[0];

      imgDetail.src = project.image;
      imgDetail.alt = project.title;
      titleDetail.textContent = project.title;
      tagsDetail.innerHTML = project.tags.map(t => `<li>${t}</li>`).join("");
      bodyDetail.textContent = project.detail; // futuramente dá pra trocar para bullets

      currentProjectId = project.id;
      renderProjectsCarousel(currentProjectId);

      if (updateUrl) {
        const params = new URLSearchParams(window.location.search);
        params.set("projeto", project.id);
        const newUrl = `${window.location.pathname}?${params.toString()}`;
        window.history.replaceState({}, "", newUrl);
      }
    }

    // projeto inicial (querystring ou primeiro)
    const params = new URLSearchParams(window.location.search);
    const initialId = params.get("projeto") || PROJECTS[0].id;
    setActiveProject(initialId, false);

    // navegação do carrossel (anda 1 em 1)
    if (prevBtn && nextBtn && gridProjetos) {
      prevBtn.addEventListener("click", () => {
        projectStartIndex = (projectStartIndex - 1 + PROJECTS.length) % PROJECTS.length;
        renderProjectsCarousel(currentProjectId);
      });

      nextBtn.addEventListener("click", () => {
        projectStartIndex = (projectStartIndex + 1) % PROJECTS.length;
        renderProjectsCarousel(currentProjectId);
      });
    }

    // Ano rodapé
    document.getElementById("year").textContent = new Date().getFullYear();

    // Menu mobile
    const navToggle = document.querySelector(".nav-toggle");
    const navLinks = document.querySelector(".nav-links");
    if (navToggle && navLinks) {
      navToggle.addEventListener("click", () => {
        navLinks.classList.toggle("nav-open");
      });
    }

    // Popup da imagem
    const modal = document.getElementById("image-modal");
    const modalImg = document.getElementById("modal-img");
    const closeBtn = document.getElementById("modal-close");

    imgDetail.addEventListener("click", () => {
      if (!imgDetail.src) return;
      modalImg.src = imgDetail.src;
      modal.style.display = "flex";
    });

    closeBtn.addEventListener("click", () => {
      modal.style.display = "none";
    });

    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.style.display = "none";
      }
    });
  </script>
</body>
</html>
